{"version":3,"file":"inocean-sales-taxes-usa-Czn31KsY.js","sources":["../../../app/administration/src/module/sw-order/component/sw-order-line-items-grid/sw-order-line-items-grid.html.twig","../../../app/administration/src/module/sw-order/component/sw-order-line-items-grid/index.js","../../../app/administration/src/module/sw-order/view/sw-order-detail-general/sw-order-detail-general.html.twig","../../../app/administration/src/module/sw-order/view/sw-order-detail-general/index.js"],"sourcesContent":["{% block sw_order_line_items_grid_grid_columns_tax_inline_edit %}{% endblock %}\n\n{% block sw_order_line_items_grid_grid_columns_tax_content_tooltip %}{% endblock %}\n\n{% block sw_order_line_items_grid_grid_columns_tax_content %}\n<span v-if=\"item.price && item.price.taxRules.length && lineItemTaxesMap[item.id]\">\n    <template v-for=\"(calculatedTax, index) in lineItemTaxesMap[item.id]\" :key=\"index\">\n        <span class=\"sw-order-line-items-grid__item_taxes\">\n            {{ $tc('salseTaxUsa.order.summary.tax' + calculatedTax.taxName, { taxRate: calculatedTax.taxRate }, 1) }} {{ currencyFilter(calculatedTax.taxPrice, order.currency.isoCode, order.totalRounding.decimals) }}\n        </span>\n    </template>\n</span>\n{% endblock %}","import template from './sw-order-line-items-grid.html.twig';\nimport './sw-order-line-items-grid.scss';\n\nconst { Component } = Shopware;\n\nComponent.override('sw-order-line-items-grid', {\n    template,\n\n    computed: {\n\n        getLineItemColumns() {\n            const columnDefinitions = [\n                {\n                    property: 'quantity',\n                    dataIndex: 'quantity',\n                    label: 'sw-order.detailBase.columnQuantity',\n                    allowResize: false,\n                    align: 'right',\n                    inlineEdit: true,\n                    width: '90px',\n                },\n                {\n                    property: 'label',\n                    dataIndex: 'label',\n                    label: 'sw-order.detailBase.columnProductName',\n                    allowResize: false,\n                    primary: true,\n                    inlineEdit: true,\n                    multiLine: true,\n                },\n                {\n                    property: 'payload.productNumber',\n                    dataIndex: 'payload.productNumber',\n                    label: 'sw-order.detailBase.columnProductNumber',\n                    allowResize: false,\n                    align: 'left',\n                    visible: false,\n                },\n                {\n                    property: 'unitPrice',\n                    dataIndex: 'unitPrice',\n                    label: this.unitPriceLabel,\n                    allowResize: false,\n                    align: 'right',\n                    inlineEdit: true,\n                    width: '120px',\n                },\n            ];\n\n            if (this.taxStatus !== 'tax-free') {\n                columnDefinitions.push({\n                    property: 'price.taxRules[0]',\n                    label: 'salseTaxUsa.order.lineItem.tax',\n                    allowResize: false,\n                    align: 'right',\n                    inlineEdit: false,\n                    width: '110px',\n                });\n            }\n\n            return [\n                ...columnDefinitions,\n                {\n                    property: 'totalPrice',\n                    dataIndex: 'totalPrice',\n                    label:\n                        this.taxStatus === 'gross'\n                            ? 'sw-order.detailBase.columnTotalPriceGross'\n                            : 'sw-order.detailBase.columnTotalPriceNet',\n                    allowResize: false,\n                    align: 'right',\n                    width: '120px',\n                },\n            ];\n        },\n\n        lineItemTaxesMap() {\n            if (!this.order || !this.order.lineItems) {\n                return {};\n            }\n    \n            const map = {};\n    \n            this.order.lineItems.forEach(lineItem => {\n                map[lineItem.id] = Array.isArray(lineItem.payload?.inoceanUsaTaxInfo) \n                    ? lineItem.payload.inoceanUsaTaxInfo.map(taxInfo => ({\n                        taxName: taxInfo.name,\n                        taxRate: taxInfo.rate,\n                        taxPrice: Number(taxInfo.tax) || 0,\n                    })) \n                    : [];\n            });\n\n            return map;\n        },\n    \n        lineItemsTaxes() {\n            return Object.entries(this.lineItemTaxesMap).map(([id, taxes]) => ({\n                id,\n                taxes,\n            }));\n        }\n\n    }\n});","{% block sw_order_detail_general_line_items_summary_amount_without_tax %}\n<template v-if=\"taxStatus !== 'tax-free'\">\n    <dt><strong>{{ $tc('salseTaxUsa.order.summary.subtotal') }}</strong></dt>\n    <dd><strong>{{ currencyFilter(order.amountNet, currency.isoCode, order.totalRounding.decimals) }}</strong></dd>\n</template>\n{% endblock %}\n\n{% block sw_order_detail_general_line_items_summary_taxes %}\n    <template v-if=\"taxStatus !== 'tax-free'\">\n        <template\n            v-for=\"(calculatedTax, index) in sortedCalculatedTaxes\"\n            :key=\"index\"\n        >\n            <dt>\n                {{ $tc('salseTaxUsa.order.summary.tax' + calculatedTax.taxDetails.name, { taxRate: calculatedTax.taxDetails.rate }, 1) }}\n            </dt>\n            <dd>\n                {{ currencyFilter(calculatedTax.taxDetails.tax, currency.isoCode, order.totalRounding.decimals) }}\n            </dd>\n        </template>\n        <template\n            v-for=\"(shippingTax, index) in sortedShippingTaxes\"\n            :key=\"index\"\n        >\n            <dt>\n                {{ $tc('salseTaxUsa.order.summary.shippingTax' + shippingTax.taxDetails.name, { taxRate: shippingTax.taxDetails.rate }, 1) }}\n            </dt>\n            <dd>\n                {{ currencyFilter(shippingTax.taxDetails.tax, currency.isoCode, order.totalRounding.decimals) }}\n            </dd>\n        </template>\n    </template>\n{% endblock %}\n\n{% block sw_order_detail_general_line_items_summary_amount_total %}\n<template v-if=\"taxStatus !== 'tax-free'\">\n    <dt><strong>{{ $tc('salseTaxUsa.order.summary.groundTotal') }}</strong></dt>\n    <dd><strong>{{ currencyFilter(orderTotal, currency.isoCode, order.totalRounding.decimals) }}</strong></dd>\n    <template v-if=\"displayRounded\">\n        <dt><strong>{{ $tc('salseTaxUsa.order.summary.totalRounded') }}</strong></dt>\n        <dd><strong>{{ currencyFilter(order.price.totalPrice, currency.isoCode, order.totalRounding.decimals) }}</strong></dd>\n    </template>\n</template>\n{% endblock %}\n","import template from './sw-order-detail-general.html.twig';\n\nconst { Component } = Shopware;\n\nComponent.override('sw-order-detail-general', {\n    template,\n\n    computed: {\n        taxStatus() {\n            return this.order.price.taxStatus;\n        },\n        sortedCalculatedTaxes() {\n\n            if (!this.order || !this.order.lineItems) {\n                return [];\n            }\n\n            const taxAggregation = {};\n\n            this.order.lineItems.forEach(lineItem => {\n                if (lineItem.payload && Array.isArray(lineItem.payload.inoceanUsaTaxInfo)) {\n                    lineItem.payload.inoceanUsaTaxInfo.forEach(taxInfo => {\n                        const rateKey = taxInfo.name;\n\n                        if (!taxAggregation[rateKey]) {\n                            taxAggregation[rateKey] = {\n                                taxName: taxInfo.name,\n                                taxRate: taxInfo.rate,\n                                taxPriceTotal: 0,\n                            };\n                        }\n\n                        taxAggregation[rateKey].taxPriceTotal += Number(taxInfo.tax) || 0;\n                    });\n                }\n            });\n\n            const aggregatedTaxes = Object.values(taxAggregation);\n\n            // aggregatedTaxes.sort((a, b) => a.taxRate - b.taxRate);\n            return aggregatedTaxes.map(tax => ({\n                taxDetails: {\n                    name: tax.taxName,\n                    rate: tax.taxRate,\n                    tax: tax.taxPriceTotal,\n                },\n            }));\n        },\n        sortedShippingTaxes() {\n\n            if (!this.order || !this.order.lineItems) {\n                return [];\n            }\n\n            const shippingTaxAggregation = {};\n\n            this.order.lineItems.forEach(lineItem => {\n                if (lineItem.payload && Array.isArray(lineItem.payload.inoceanShippingTaxInfo)) {\n                    lineItem.payload.inoceanShippingTaxInfo.forEach(taxInfo => {\n                        const rateKey = taxInfo.rate;\n\n                        if (!shippingTaxAggregation[rateKey]) {\n                            shippingTaxAggregation[rateKey] = {\n                                taxName: taxInfo.name,\n                                taxRate: taxInfo.rate,\n                                taxPriceTotal: 0,\n                            };\n                        }\n\n                        shippingTaxAggregation[rateKey].taxPriceTotal += Number(taxInfo.tax) || 0;\n                    });\n                }\n            });\n\n            const aggregatedShippingTaxes = Object.values(shippingTaxAggregation);\n\n            // aggregatedShippingTaxes.sort((a, b) => a.taxRate - b.taxRate);\n            return aggregatedShippingTaxes.map(tax => ({\n                taxDetails: {\n                    name: tax.taxName,\n                    rate: tax.taxRate,\n                    tax: tax.taxPriceTotal,\n                },\n            }));\n        },\n    }\n});"],"names":["template$1","Component","template","columnDefinitions","map","lineItem","_a","taxInfo","id","taxes","taxAggregation","rateKey","tax","shippingTaxAggregation"],"mappings":"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"}