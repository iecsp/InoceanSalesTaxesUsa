{% sw_extends '@Storefront/storefront/page/checkout/summary/summary-tax.html.twig' %}

{% block page_checkout_summary_tax_label %}
    {% set defaultShippingCountry = context.customer.defaultShippingAddress.country.iso %}
    
    {% if defaultShippingCountry == 'US' %}
        {% if salesTaxUsa.config.TaxBreakdown == 1 %}
            {% if loop.index == 1 %}<dt class="col-12 tax-details">{{ ('salseTaxUsa.checkout.summary.TaxDetail' )|trans }}</dt>{% endif %}
            {% if loop.index == 5 && taxItem.taxRate != 0 %}<dt class="col-12 tax-details">{{ ('salseTaxUsa.checkout.summary.shippingTaxDetail' )|trans }}</dt>{% endif %}
            <dt class="col-7 checkout-aside-summary-label summary-tax">
                {% if taxItem.taxRate == 0 && loop.index == 5 %}
                    {{ ('salseTaxUsa.checkout.summary.taxName0' )|trans }}
                {% else %}
                    {{ ('salseTaxUsa.checkout.summary.taxName' ~ loop.index)|trans }} ({{ taxItem.taxRate }}%)
                {% endif %}
            </dt>
        {% else %}
            <dt class="col-7 checkout-aside-summary-label summary-tax">
                {{ ('salseTaxUsa.checkout.summary.combinedRate' ~ loop.index)|trans }} ({{ taxItem.taxRate }}%)
            </dt>
        {% endif %}
    {% else %}
        {{ parent() }}
    {% endif %}

{% endblock %}